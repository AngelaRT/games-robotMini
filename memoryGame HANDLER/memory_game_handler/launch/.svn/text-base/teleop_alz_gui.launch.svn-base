
<launch>
<arg name="robot"/>

<!-- The kinect camera inverts the colours of the image, but the Asus Xtion or a
usual web camera don't -->
<arg name="use_kinect" default="true"/>

<!-- If we want to transmit the image through the network, we need to set this
parameter to true so the image is compressed -->
<arg name="image_compressed" default="true"/>

<!-- If we want to launch more than one teleop node, we have to put them
different names -->
<arg name="node_name" default="teleop_alz_gui"/>

<!-- To select the DB we want to use. We have to provide the parameters
of this DB in the form: "ip;db_name;db_user;password" -->
<arg name="db_params" default="192.168.1.33;robalz;user;m3n0s1,"/> 
<!--<arg name="db_params" default="localhost;robalz;user;m3n0s1,"/>-->

 <!-- Select if we want to use the interface for normal operation or
 for group experiments-->
<arg name="group_exp" default="false"/>


<!-- subscribe to compressed image and decompress locally -->

<group if="$(arg image_compressed)" ns="$(arg robot)">
  <node pkg="image_transport" type="republish" name="decompress_rgb_local"
        output="screen"  args="compressed        in:=rgb
                               raw               out:=rgb_local"/>

</group>


<!-- graphical user interface -->

<group unless="$(arg group_exp)" ns="$(arg robot)">
  <node pkg="teleop" type="teleop_alz_gui.exe"
    name="$(arg node_name)" output="screen" required="true">

    <param name="use_kinect" value="$(arg use_kinect)" />
    <param name="db_params" value="$(arg db_params)" />

    <!-- the node expects the image in the topic "rgb_local" so, although
    we don't use the compressed image in this case, we still have to remap
    the name of the topic -->
    <remap unless="$(arg image_compressed)" from="rgb" to="rgb_local"/>
  </node>
</group>

<group if="$(arg group_exp)" ns="$(arg robot)">
  <node if="$(arg group_exp)" pkg="teleop" type="alz_group_gui.exe"
    name="$(arg node_name)" output="screen" required="true">

    <param name="use_kinect" value="$(arg use_kinect)" />
    <param name="db_params" value="$(arg db_params)" />

    <!-- the node expects the image in the topic "rgb_local" so, although
    we don't use the compressed image in this case, we still have to remap
    the name of the topic -->
    <remap unless="$(arg image_compressed)" from="rgb" to="rgb_local"/>
  </node>

</group>

</launch>
